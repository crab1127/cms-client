webpackJsonp([7],{1:function(t,e,a){t.exports={"default":a(2),__esModule:!0}},2:function(t,e,a){var o=a(3),i=o.JSON||(o.JSON={stringify:JSON.stringify});t.exports=function(t){return i.stringify.apply(i,arguments)}},3:function(t,e){var a=t.exports={version:"2.4.0"};"number"==typeof __e&&(__e=a)},6:function(t,e){"use strict";t.exports={methods:{toggleDropdown:function(t){t.preventDefault(),this.$el.classList.toggle("open")}},ready:function(){var t=this.$el;t.addEventListener("click",this.toggleDropdown),this._closeEvent=window.addEventListener("click",function(e){t.contains(e.target)||t.classList.remove("open")})},beforeDestroy:function(){this._closeEvent&&this._closeEvent.remove()}}},7:function(t,e){t.exports="<div class=btn-group> <slot></slot> <slot name=dropdown-menu></slot> </div>"},8:function(t,e,a){var o,i;o=a(6),i=a(7),t.exports=o||{},t.exports.__esModule&&(t.exports=t.exports["default"]),i&&(("function"==typeof t.exports?t.exports.options||(t.exports.options={}):t.exports).template=i)},33:function(t,e,a){"use strict";function o(t){return t&&t.__esModule?t:{"default":t}}var i=a(1),l=o(i),s={ishidden:1,target:"_blank",sortid:10,type:1,area:1};t.exports={data:function(){return{showProductModal:!1,products:[],product:$.extend({},s),productIndex:"",areas:[{id:1,name:"首页",children:[]},{id:2,name:"样品中心",children:[]},{id:3,name:"专业镇",children:[]},{id:4,name:"专业市场",children:[]}],page:{total:null,current:1,perPage:10},search:{area:null}}},route:{data:function(t){this.getArea(),this.getProduct()}},methods:{filter:function(t){this.search.area=t,this.page.current=1,this.page.total=null,this.getProduct()},getProduct:function(){var t=this,e=$.extend({},this.page,this.search);$.ajax({url:domain+"/product",data:e,type:"GET"}).done(function(e){1==e.status&&(t.page.total=e.count,t.products=e.data)})},addProduct:function(){this.product=$.extend({},s),this.showProductModal=!0},editProduct:function(t){this.product=this.products[t],this.productIndex=t,this.showProductModal=!0},saveProduct:function(){var t=this,e=JSON.parse((0,l["default"])(this.product));$.ajax({url:domain+"/product",type:"POST",dataType:"json",data:e}).done(function(a){1==a.status&&(e._id?t.products.$set(t.productIndex,e):(e._id=a.data._id,t.products.push(e)),t.showProductModal=!1)})},delProduct:function(t,e){var a=this;confirm("确定删除？")&&t&&$.ajax({url:domain+"/product/"+t,type:"delete"}).done(function(t){1==t.status&&a.products.splice(e,1)})},pageCallback:function(t){this.page.current=t,this.getProduct()},getArea:function(){var t=this;$.ajax({url:domain+"/industrial",data:{perPage:100},type:"GET"}).done(function(e){if("1"==e.status&&e.data){for(var a=[],o=0;o<e.data.length;o++)a.push({id:e.data[o]._id,name:e.data[o].name});t.areas[2].children=a}}),$.ajax({url:domain+"/market",data:{perPage:100},type:"GET"}).done(function(e){if("1"==e.status&&e.data){for(var a=[],o=0;o<e.data.length;o++)a.push({id:e.data[o]._id,name:e.data[o].name});t.areas[3].children=a}})}},filters:{areaText:function(t){var e="其他";if(null!==t&&void 0!==t)for(var a=this.areas.length-1;a>=0;a--){if(this.areas[a].id==t){e=this.areas[a].name;break}var o=this.areas[a].children;if(o&&o.length)for(var i=o.length-1;i>=0;i--)if(o[i].id==t){e=this.areas[a].name+" - "+o[i].name;break}}return e}},components:{dropdown:a(8)}}},46:function(t,e,a){e=t.exports=a(4)(),e.push([t.id,".palent{background:#fff;border:1px solid #ddd;padding:10px}.mb10{margin-bottom:10px}.dropdown-area{max-height:300px;overflow-y:auto}.table-responsive{overflow:visible}",""])},63:function(t,e){t.exports='<side-menu></side-menu> <div class=content-wrapper> <div class=content-header> <h1>产品管理</h1> </div> <div class=content> <button class="btn btn-primary mb10" @click=addProduct>+ 添加产品</button> <div class="box box-solid"> <div class="box-body table-responsive no-padding"> <table class="table table-hover"> <thead> <tr> <th style=width:50%>产品名</th> <th> <dropdown> <a href=javascript:; data-toggle=dropdown> 显示位置 <span class=caret></span> </a> <ul slot=dropdown-menu class="dropdown-menu dropdown-area"> <li @click=filter(null)><a href=javascript:;>全部</a></li> <template v-for="area in areas"> <li @click=filter(area.id)><a href=javascript:;>{{area.name}}</a></li> <li v-if="area.children && area.children.length" v-for="item in area.children" @click=filter(item.id)><a href=javascript:;>&nbsp; |- {{ item.name }}</a></li> </template> </ul> </dropdown> </th> <th>是否显示</th> <th>管理</th> </tr> </thead> <tbody> <tr v-for="item in products"> <td> <a class=media v-link=item.link target=_blank> <div class=media-left> <img v-bind:src="item.img | resize" width=100> </div> <div class=media-body> {{ item.name }} </div> </a> </td> <td>{{ item.area | areaText }}</td> <td>{{ item.ishidden | ishidden }}</td> <td> <button class="btn btn-sm btn-primary" @click=editProduct($index)>编辑</button> <button class="btn btn-sm btn-default" @click="delProduct(item._id, $index)">删除</button> </td> </tr> </tbody> </table> <div class="col-md-12 text-right"> <pages :total.sync=page.total :current=page.current :per-page=page.perPage :page-changed=pageCallback></pages> </div> </div> </div> </div> </div> <modal :show.sync=showProductModal title=产品> <div slot=modal-body class=modal-body> <form class=form-horizontal v-ajax-submit @submit.prevent=saveProduct> <div class=form-horizontal> <div class=form-group> <label for=inputEmail3 class="col-sm-2 control-label">产品名</label> <div class=col-sm-10> <input type=text class=form-control v-model=product.name required> </div> </div> <div class=form-group> <label for=inputEmail3 class="col-sm-2 control-label">产品描述</label> <div class=col-sm-10> <input type=text class=form-control v-model=product.desc required> </div> </div> <div class=form-group> <label for=inputEmail3 class="col-sm-2 control-label">图片</label> <div class=col-sm-10> <upload id=pick-img :img.sync=product.img></upload> </div> </div> <div class=form-group> <label for=inputEmail3 class="col-sm-2 control-label">价格</label> <div class=col-sm-10> <input type=text class=form-control v-model=product.price> </div> </div> <div class=form-group> <label for=inputEmail3 class="col-sm-2 control-label">链接</label> <div class=col-sm-10> <input type=url class=form-control v-model=product.link> </div> </div> <div class=form-group> <label for=inputEmail3 class="col-sm-2 control-label">内容类型</label> <div class=col-sm-10> <label class=radio-inline> <input type=radio name=type value=1 v-model=product.type> 推荐产品 </label> <label class=radio-inline> <input type=radio name=type value=2 v-model=product.type> 热门产品 </label> </div> </div> <div class=form-group> <label for=inputEmail3 class="col-sm-2 control-label">排序</label> <div class=col-sm-10> <input type=number class=form-control v-model=product.sortid> </div> </div> <div class=form-group> <label for=inputEmail3 class="col-sm-2 control-label">显示位置</label> <div class=col-sm-10> <select name="" class=form-control v-model=product.area required> <template v-for="area in areas"> <option :value=area.id>{{area.name}}</option> <option v-if="area.children && area.children.length" v-for="item in area.children" :value=item.id>&nbsp; |- {{ item.name }}</option> </template> </select> </div> </div> <div class=form-group> <label for=inputEmail3 class="col-sm-2 control-label">是否显示</label> <div class=col-sm-10> <label class=radio-inline> <input type=radio name=ishidden value=1 v-model=product.ishidden> 显示 </label> <label class=radio-inline> <input type=radio name=ishidden value=0 v-model=product.ishidden> 不显示 </label> </div> </div> <div class=form-group> <div class="col-sm-10 col-sm-offset-2"> <button class="btn btn-primary" type=submit>提交</button> </div> </div> </div> </form> </div> <div slot=modal-footer></div> </modal>'},78:function(t,e,a){var o,i;a(93),o=a(33),i=a(63),t.exports=o||{},t.exports.__esModule&&(t.exports=t.exports["default"]),i&&(("function"==typeof t.exports?t.exports.options||(t.exports.options={}):t.exports).template=i)},93:function(t,e,a){var o=a(46);"string"==typeof o&&(o=[[t.id,o,""]]);a(5)(o,{});o.locals&&(t.exports=o.locals)}});
//# sourceMappingURL=7.build.js.map