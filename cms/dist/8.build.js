webpackJsonp([8],{1:function(a,e,t){a.exports={"default":t(2),__esModule:!0}},2:function(a,e,t){var s=t(3),i=s.JSON||(s.JSON={stringify:JSON.stringify});a.exports=function(a){return i.stringify.apply(i,arguments)}},3:function(a,e){var t=a.exports={version:"2.4.0"};"number"==typeof __e&&(__e=t)},6:function(a,e){"use strict";a.exports={methods:{toggleDropdown:function(a){a.preventDefault(),this.$el.classList.toggle("open")}},ready:function(){var a=this.$el;a.addEventListener("click",this.toggleDropdown),this._closeEvent=window.addEventListener("click",function(e){a.contains(e.target)||a.classList.remove("open")})},beforeDestroy:function(){this._closeEvent&&this._closeEvent.remove()}}},7:function(a,e){a.exports="<div class=btn-group> <slot></slot> <slot name=dropdown-menu></slot> </div>"},8:function(a,e,t){var s,i;s=t(6),i=t(7),a.exports=s||{},a.exports.__esModule&&(a.exports=a.exports["default"]),i&&(("function"==typeof a.exports?a.exports.options||(a.exports.options={}):a.exports).template=i)},25:function(a,e,t){"use strict";function s(a){return a&&a.__esModule?a:{"default":a}}var i=t(1),o=s(i),l={ishidden:1,target:"_blank",sortid:1,area:0};a.exports={data:function(){return{showAdsModal:!1,adss:[],ads:$.extend({},l),adsIndex:"",areas:[{id:1,name:"首页",children:[]},{id:2,name:"样品中心",children:[]},{id:3,name:"专业镇",children:[]},{id:4,name:"专业市场",children:[]}],page:{total:null,current:1,perPage:10},search:{area:null}}},route:{data:function(a){this.getArea(),this.getAds()}},methods:{filter:function(a){this.search.area=a,this.page.current=1,this.page.total=null,this.getAds()},getAds:function(){var a=this,e=$.extend({},this.page,this.search);$.ajax({url:domain+"/ads",data:e,type:"GET"}).done(function(e){1==e.status&&(a.page.total=e.count,a.adss=e.data)})},addAds:function(){this.ads=$.extend({},l),this.showAdsModal=!0,console.log(111111111,this.areas)},editAds:function(a){this.ads=this.adss[a],this.adsIndex=a,this.showAdsModal=!0},saveAds:function(){var a=this,e=JSON.parse((0,o["default"])(this.ads));$.ajax({url:domain+"/ads",type:"POST",dataType:"json",data:e}).done(function(t){1==t.status&&(e._id?a.adss.$set(a.adsIndex,e):(e._id=t.data._id,a.adss.push(e)),a.showAdsModal=!1)})},delAds:function(a,e){var t=this;a&&$.ajax({url:domain+"/ads/"+a,type:"delete"}).done(function(a){1==a.status&&t.adss.splice(e,1)})},pageCallback:function(a){this.page.current=a,this.getAds()},getArea:function(){var a=this;$.ajax({url:domain+"/industrial",data:{perPage:100},type:"GET"}).done(function(e){if("1"==e.status&&e.data){for(var t=[],s=0;s<e.data.length;s++)t.push({id:e.data[s]._id,name:e.data[s].name});a.areas[2].children=t}}),$.ajax({url:domain+"/market",data:{perPage:100},type:"GET"}).done(function(e){if("1"==e.status&&e.data){for(var t=[],s=0;s<e.data.length;s++)t.push({id:e.data[s]._id,name:e.data[s].name});a.areas[3].children=t}})}},filters:{areaText:function(a){var e="其他";if(a)for(var t=this.areas.length-1;t>=0;t--){if(this.areas[t].id==a){e=this.areas[t].name;break}var s=this.areas[t].children;if(s&&s.length)for(var i=s.length-1;i>=0;i--)if(s[i].id==a){e=this.areas[t].name+" - "+s[i].name;break}}return e}},components:{dropdown:t(8)}}},40:function(a,e,t){e=a.exports=t(4)(),e.push([a.id,".palent{background:#fff;border:1px solid #ddd;padding:10px}.mb10{margin-bottom:10px}.dropdown-area{max-height:300px;overflow-y:auto}.table-responsive{overflow:visible}",""])},55:function(a,e){a.exports='<side-menu></side-menu> <div class=content-wrapper> <div class=content-header> <h1>幻灯片管理</h1> </div> <div class=content> <button class="btn btn-primary mb10" @click=addAds>+ 添加幻灯片</button> <div class="box box-solid"> <div class="box-body table-responsive no-padding"> <table class="table table-hover"> <thead> <tr> <th style=width:50%>幻灯片名</th> <th> <dropdown> <a href=javascript:; data-toggle=dropdown> 显示位置 <span class=caret></span> </a> <ul slot=dropdown-menu class="dropdown-menu dropdown-area"> <li @click=filter(null)><a href=javascript:;>全部</a></li> <template v-for="area in areas"> <li @click=filter(area.id)><a href=javascript:;>{{area.name}}</a></li> <li v-if="area.children && area.children.length" v-for="item in area.children" @click=filter(item.id)><a href=javascript:;>&nbsp; |- {{ item.name }}</a></li> </template> </ul> </dropdown> </th> <th>是否显示</th> <th>管理</th> </tr> </thead> <tbody> <tr v-for="item in adss"> <td> <a class=media v-link=item.link target=_blank> <div class=media-left> <img v-bind:src="item.img | resize" width=100 height=100> </div> <div class=media-body> {{ item.name }} </div> </a> </td> <td>{{ item.area | areaText }}</td> <td>{{ item.ishidden | ishidden }}</td> <td> <button class="btn btn-sm btn-primary" @click=editAds($index)>编辑</button> <button class="btn btn-sm btn-default" @click="delAds(item._id, $index)">删除</button> </td> </tr> </tbody> </table> <div class="col-md-12 text-right"> <pages :total.sync=page.total :current=page.current :per-page=page.perPage :page-changed=pageCallback></pages> </div> </div> </div> </div> </div> <modal :show.sync=showAdsModal title=幻灯片> <div slot=modal-body class=modal-body> <form class=form-horizontal v-ajax-submit @submit.prevent=saveAds> <div class=form-horizontal> <div class=form-group> <label for=inputEmail3 class="col-sm-2 control-label">幻灯片名</label> <div class=col-sm-10> <input type=text class=form-control v-model=ads.name required> </div> </div> <div class=form-group> <label for=inputEmail3 class="col-sm-2 control-label">图片</label> <div class=col-sm-10> <upload id=pick-img :img.sync=ads.img></upload> </div> </div> <div class=form-group> <label for=inputEmail3 class="col-sm-2 control-label">链接</label> <div class=col-sm-10> <input type=url class=form-control v-model=ads.link> </div> </div> <div class=form-group> <label for=inputEmail3 class="col-sm-2 control-label">宽高</label> <div class=col-sm-3> <input type=number class=form-control v-model=ads.width placeholder=宽> </div> <div class=col-sm-3> <input type=number class=form-control v-model=ads.height placeholder=高> </div> </div> <div class=form-group> <label for=inputEmail3 class="col-sm-2 control-label">排序</label> <div class=col-sm-10> <input type=number class=form-control v-model=ads.sortid> </div> </div> <div class=form-group> <label for=inputEmail3 class="col-sm-2 control-label">显示位置</label> <div class=col-sm-10> <select name="" class=form-control v-model=ads.area required> <template v-for="area in areas"> <option :value=area.id>{{area.name}}</option> <option v-if="area.children && area.children.length" v-for="item in area.children" :value=item.id>&nbsp; |- {{ item.name }}</option> </template> </select> </div> </div> <div class=form-group> <label for=inputEmail3 class="col-sm-2 control-label">是否显示</label> <div class=col-sm-10> <label class=radio-inline> <input type=radio name=isTop value=1 v-model=ads.ishidden> 显示 </label> <label class=radio-inline> <input type=radio name=isTop value=0 v-model=ads.ishidden> 隐藏 </label> </div> </div> <div class=form-group> <div class="col-sm-10 col-sm-offset-2"> <button class="btn btn-primary" type=submit>提交</button> </div> </div> </div> </form> </div> <div slot=modal-footer></div> </modal>'},72:function(a,e,t){var s,i;t(87),s=t(25),i=t(55),a.exports=s||{},a.exports.__esModule&&(a.exports=a.exports["default"]),i&&(("function"==typeof a.exports?a.exports.options||(a.exports.options={}):a.exports).template=i)},87:function(a,e,t){var s=t(40);"string"==typeof s&&(s=[[a.id,s,""]]);t(5)(s,{});s.locals&&(a.exports=s.locals)}});
//# sourceMappingURL=8.build.js.map