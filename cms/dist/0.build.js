webpackJsonp([0],{1:function(o,t,l){o.exports={"default":l(2),__esModule:!0}},2:function(o,t,l){var s=l(3),i=s.JSON||(s.JSON={stringify:JSON.stringify});o.exports=function(o){return i.stringify.apply(i,arguments)}},3:function(o,t){var l=o.exports={version:"2.4.0"};"number"==typeof __e&&(__e=l)},17:function(o,t,l){var s,i;l(88),s=l(26),i=l(56),o.exports=s||{},o.exports.__esModule&&(o.exports=o.exports["default"]),i&&(("function"==typeof o.exports?o.exports.options||(o.exports.options={}):o.exports).template=i)},26:function(o,t,l){"use strict";function s(o){return o&&o.__esModule?o:{"default":o}}var i=l(1),a=s(i),e=l(20);e.filter("visual",function(o){var t="";switch(o){case"a":t="/cms/images/area-1.jpg";break;case"b":t="/cms/images/area-2.jpg";break;case"c":t="/cms/images/area-3.jpg";break;case"d":t="/cms/images/area-4.jpg"}return t});var d={name:"",sortId:1,state:"1"},n={sortId:1,type:"b"},r={sortId:1},c={sortId:1};o.exports={data:function(){return{showModal:!1,showProModal:!1,showLogoModal:!1,showLinkModal:!1,showsinkModal:!1,uploadPro:"",uploadLogo:"",floors:[],currentFloor:$.extend({},d),currentFloorIndex:0,newFloor:$.extend({},d),products:[],product:$.extend({},n),productIndex:"",logos:[],logo:$.extend({},r),logoIndex:"",links:[],link:$.extend({},c),linkIndex:""}},route:{data:function(o){this.getFloor()}},methods:{getFloor:function(){var o=this;$.ajax({url:domain+"/indexFloor",type:"GET"}).done(function(t){"1"==t.status&&(o.floors=t.data,o.currentFloor=t.data[0])})},addFloor:function(){this.newFloor=$.extend({},d),this.showModal=!0},editFloor:function(){var o=this;o.newFloor=$.extend({},o.currentFloor),this.showModal=!0},saveFloor:function(){var o=this,t=JSON.parse((0,a["default"])(o.newFloor));return $.ajax({url:domain+"/indexFloor",type:"post",dataType:"json",data:t}).done(function(l){1==l.status&&(t._id?o.floors.$set(o.currentFloorIndex,t):(t._id=l.data._id,o.floors.push(t)),o.showModal=!1)}),!1},switchFloor:function(o,t){this.currentFloorIndex=t,this.currentFloor=this.floors[t]},delFloor:function(){var o=this;confirm("确定删除？")&&this.currentFloor._id&&$.ajax({url:domain+"/indexFloor/"+this.currentFloor._id,type:"delete"}).done(function(t){1==t.status&&o.floors.splice(o.currentFloorIndex,1)})},getProduct:function(){var o=this,t=this.currentFloor._id;$.ajax({url:domain+"/indexProduct/"+t,type:"GET",dataType:"json"}).done(function(t){1==t.status&&(o.products=t.data)})},addProduct:function(){this.product=$.extend({},n),this.showProModal=!0},editProduct:function(o){this.product=this.products[o],this.productIndex=o,this.showProModal=!0},saveProduct:function(){var o=this,t=JSON.parse((0,a["default"])(this.product));t.floorid=this.currentFloor._id,$.ajax({url:domain+"/indexProduct",type:"POST",dataType:"json",data:t}).done(function(l){1==l.status&&(t._id?o.products.$set(o.productIndex,t):(t._id=l.data._id,o.products.push(t)),o.showProModal=!1)})},delProduct:function(o,t){var l=this;confirm("确定删除？")&&o&&$.ajax({url:domain+"/indexProduct/"+o,type:"delete"}).done(function(o){1==o.status&&l.products.splice(t,1)})},getLogo:function(){var o=this,t=this.currentFloor._id;$.ajax({url:domain+"/indexLogo/"+t,type:"GET",dataType:"json"}).done(function(t){1==t.status&&(o.logos=t.data)})},addLogo:function(){this.logo=$.extend({},r),this.showLogoModal=!0},editLogo:function(o){this.logo=this.logos[o],this.logoIndex=o,this.showLogoModal=!0},saveLogo:function(){var o=this,t=JSON.parse((0,a["default"])(this.logo));t.floorid=this.currentFloor._id,$.ajax({url:domain+"/indexLogo",type:"POST",dataType:"json",data:t}).done(function(l){1==l.status&&(t._id?o.logos.$set(o.logoIndex,t):(t._id=l.data._id,o.logos.push(t)),o.showLogoModal=!1)})},delLogo:function(o,t){var l=this;confirm("确定删除？")&&o&&$.ajax({url:domain+"/indexLogo/"+o,type:"delete"}).done(function(o){1==o.status&&l.logos.splice(t,1)})},getLink:function(){var o=this,t=this.currentFloor._id;$.ajax({url:domain+"/indexLink/"+t,type:"GET",dataType:"json"}).done(function(t){1==t.status&&(o.links=t.data)})},addLink:function(){this.link=$.extend({},c),this.showLinkModal=!0},editLink:function(o){this.link=this.links[o],this.linkIndex=o,this.showLinkModal=!0},saveLink:function(){var o=this,t=JSON.parse((0,a["default"])(this.link));t.floorid=this.currentFloor._id,$.ajax({url:domain+"/indexLink",type:"POST",dataType:"json",data:t}).done(function(l){1==l.status&&(t._id?o.links.$set(o.linkIndex,t):(t._id=l.data._id,o.links.push(t)),o.showLinkModal=!1)})},delLink:function(o,t){var l=this;confirm("确定删除？")&&o&&$.ajax({url:domain+"/indexLink/"+o,type:"delete"}).done(function(o){1==o.status&&l.links.splice(t,1)})},createStatic:function(){$.ajax({url:domain+"/create/index",type:"GET"}).done(function(o){1==o.status?alert("成功"):alert("失败")})}},watch:{"currentFloor._id":function(o,t){this.getProduct(),this.getLogo(),this.getLink()}}}},41:function(o,t,l){t=o.exports=l(4)(),t.push([o.id,".palent{background:#fff;border:1px solid #ddd;padding:10px}.mb10{margin-bottom:10px}",""])},56:function(o,t){o.exports='<side-menu></side-menu> <div class=content-wrapper> <div class=content-header> <h1>首页</h1> </div> <div class=content> <div class=mb10 style=""> <button class="btn btn-primary" @click=addFloor> <span class="glyphicon glyphicon-plus"></span> 添加楼层</button> <a class="btn btn-danger" href=/ target=_blank>预览</a> </div> <div class="nav-tabs-custom theme-panel"> <ul class="nav nav-tabs"> <template v-for="item in floors"> <li v-if="$index == currentFloorIndex" class=active @click="switchFloor(item._id, $index)"> <a href=javascript:;> {{ item.name }} </a> </li> <li v-if="$index != currentFloorIndex" @click="switchFloor(item._id, $index)"> <a href=javascript:;> {{ item.name }} </a> </li> </template> </ul> <div class=tab-content> <div class=mb10> <div class=btn-group> <button type=button class="btn btn-default" @click=editFloor>修改楼层</button> <button type=button class="btn btn-default" @click=delFloor>删除楼层</button> </div> </div> <div class=row> <div class=col-md-5> <div class="box box-default"> <div class="box-header with-border"> <h3 class=box-title>产品</h3> <div class="box-tools pull-right"> <a href=javascript:; class="btn btn-xs btn-default" @click=addProduct> 添加产品 </a> </div> </div> <div class=box-body> <div class=row> <table class="table table-hover"> <tr> <th style=width:50%>产品</th> <th>显示位置</th> <th>管理</th> </tr> <tr v-for="item in products"> <td> <a v-bind:href=item.link target=_blank class=media> <span class=media-left> <img v-bind:src="item.img | resize" alt="" width=100> </span> <span class=media-body> {{ item.title }} </span> </a> </td> <td><img :src="item.type | visual" alt=""></td> <td> <button class="btn btn-sm btn-primary" @click=editProduct($index)>编辑</button> <button class="btn btn-sm btn-default" @click="delProduct(item._id, $index)">删除</button> </td> </tr> </table> </div> </div> </div> </div> <div class=col-md-4> <div class="box box-default"> <div class="box-header with-border"> <h3 class=box-title>logo</h3> <div class="box-tools pull-right"> <a href=javascript:; class="btn btn-xs btn-default" @click=addLogo> 添加logo </a> </div> </div> <div class=box-body> <div class=row> <table class="table table-hover"> <tr> <th style=width:50%>名字</th> <th>管理</th> </tr> <tr v-for="item in logos"> <td> <a v-bind:href=item.link target=_blank class=media> <span class=media-left> <img v-bind:src="item.img | resize" alt="" width=100> </span> <span class=media-body> {{ item.title }} </span> </a> </td> <td> <button class="btn btn-sm btn-primary" @click=editLogo($index)>编辑</button> <button class="btn btn-sm btn-default" @click="delLogo(item._id, $index)">删除</button> </td> </tr> </table> </div> </div> </div> </div> <div class=col-md-3> <div class="box box-default"> <div class="box-header with-border"> <h3 class=box-title>链接</h3> <div class="box-tools pull-right"> <a href=javascript:; class="btn btn-xs btn-default" @click=addLink> 添加链接 </a> </div> </div> <div class=box-body> <div class=row> <table class="table table-hover"> <tr> <th style=width:50%>名字</th> <th>管理</th> </tr> <tr v-for="item in links"> <td> <a v-bind:href=item.link target=_blank> {{ item.title }} </a> </td> <td> <button class="btn btn-sm btn-primary" @click=editLink($index)>编辑</button> <button class="btn btn-sm btn-default" @click="delLink(item._id, $index)">删除</button> </td> </tr> </table> </div> </div> </div> </div> </div> </div> </div> </div> </div> <modal :show.sync=showModal title=楼层> <div slot=modal-body class=modal-body> <form class=form-horizontal v-ajax-submit @submit.prevent=saveFloor> <div class=form-horizontal> <div class=form-group> <label for=inputEmail3 class="col-sm-2 control-label">楼层名</label> <div class=col-sm-10> <input type=text class=form-control v-model=newFloor.name required> </div> </div> <div class=form-group> <label for=inputEmail3 class="col-sm-2 control-label">排序</label> <div class=col-sm-10> <input type=number class=form-control v-model=newFloor.sortId> </div> </div> <div class=form-group> <label for=inputPassword3 class="col-sm-2 control-label">是否显示</label> <div class=col-sm-10> <label class=radio-inline> <input type=radio name=state value=1 v-model=newFloor.state> 是 </label> <label class=radio-inline> <input type=radio name=state value=0 v-model=newFloor.state> 否 </label> </div> </div> <div class=form-group> <div class="col-sm-10 col-sm-offset-2"> <button class="btn btn-primary" type=submit> 提交 </button> </div> </div> </div> </form> </div> <div slot=modal-footer></div> </modal> <modal :show.sync=showProModal title=产品> <div slot=modal-body class=modal-body> <form class=form-horizontal v-ajax-submit @submit.prevent=saveProduct> <div class=form-horizontal> <div class=form-group> <label for=inputEmail3 class="col-sm-2 control-label">产品名</label> <div class=col-sm-10> <input type=text class=form-control v-model=product.title required> </div> </div> <div class=form-group> <label for=inputEmail3 class="col-sm-2 control-label">产品图片</label> <div class=col-sm-10> <upload id=pick-product text=上传图片 :img.sync=product.img></upload> </div> </div> <div class=form-group> <label for=inputEmail3 class="col-sm-2 control-label">产品链接</label> <div class=col-sm-10> <input type=url class=form-control v-model=product.link> </div> </div> <div class=form-group> <label for=inputEmail3 class="col-sm-2 control-label">产品位置</label> <div class=col-sm-10> <label class=radio-inline> <input type=radio name=type value=a v-model=product.type> <img src=/cms/images/area-1.jpg alt=""> </label> <label class=radio-inline> <input type=radio name=type value=b v-model=product.type> <img src=/cms/images/area-2.jpg alt=""> </label> <label class=radio-inline> <input type=radio name=type value=c v-model=product.type> <img src=/cms/images/area-3.jpg alt=""> </label> <label class=radio-inline> <input type=radio name=type value=d v-model=product.type> <img src=/cms/images/area-4.jpg alt=""> </label> </div> </div> <div class=form-group> <label for=inputEmail3 class="col-sm-2 control-label">排序</label> <div class=col-sm-10> <input type=number class=form-control v-model=product.sortId> </div> </div> <div class=form-group> <div class="col-sm-10 col-sm-offset-2"> <button class="btn btn-primary" type=submit>提交</button> </div> </div> </div> </form> </div> <div slot=modal-footer></div> </modal> <modal :show.sync=showLogoModal title=logo> <div slot=modal-body class=modal-body> <form class=form-horizontal v-ajax-submit @submit.prevent=saveLogo> <div class=form-horizontal> <div class=form-group> <label for=inputEmail3 class="col-sm-2 control-label">名字</label> <div class=col-sm-10> <input type=text class=form-control v-model=logo.title required> </div> </div> <div class=form-group> <label for=inputEmail3 class="col-sm-2 control-label">图片</label> <div class=col-sm-10> <upload id=pick1 text=上传图片 :img.sync=logo.img></upload> </div> </div> <div class=form-group> <label for=inputEmail3 class="col-sm-2 control-label">链接</label> <div class=col-sm-10> <input type=url class=form-control v-model=logo.link> </div> </div> <div class=form-group> <label for=inputEmail3 class="col-sm-2 control-label">排序</label> <div class=col-sm-10> <input type=number class=form-control v-model=logo.sortId> </div> </div> <div class=form-group> <div class="col-sm-10 col-sm-offset-2"> <button class="btn btn-primary" type=submit>提交</button> </div> </div> </div> </form> </div> <div slot=modal-footer></div> </modal> <modal :show.sync=showLinkModal title=链接> <div slot=modal-body class=modal-body> <form class=form-horizontal v-ajax-submit @submit.prevent=saveLink> <div class=form-horizontal> <div class=form-group> <label for=inputEmail3 class="col-sm-2 control-label">名字</label> <div class=col-sm-10> <input type=text class=form-control v-model=link.title required> </div> </div> <div class=form-group> <label for=inputEmail3 class="col-sm-2 control-label">链接</label> <div class=col-sm-10> <input type=url class=form-control v-model=link.link> </div> </div> <div class=form-group> <label for=inputEmail3 class="col-sm-2 control-label">排序</label> <div class=col-sm-10> <input type=number class=form-control v-model=link.sortId> </div> </div> <div class=form-group> <div class="col-sm-10 col-sm-offset-2"> <button class="btn btn-primary" type=submit>提交</button> </div> </div> </div> </form> </div> <div slot=modal-footer></div> </modal>'},88:function(o,t,l){var s=l(41);"string"==typeof s&&(s=[[o.id,s,""]]);l(5)(s,{});s.locals&&(o.exports=s.locals)}});
//# sourceMappingURL=0.build.js.map