webpackJsonp([11],{1:function(o,t,l){o.exports={"default":l(2),__esModule:!0}},2:function(o,t,l){var s=l(3),a=s.JSON||(s.JSON={stringify:JSON.stringify});o.exports=function(o){return a.stringify.apply(a,arguments)}},3:function(o,t){var l=o.exports={version:"2.4.0"};"number"==typeof __e&&(__e=l)},34:function(o,t,l){"use strict";function s(o){return o&&o.__esModule?o:{"default":o}}var a=l(1),e=s(a),i={name:"",sortId:1,state:"1"},r={isTop:"1",type:"b"};o.exports={data:function(){return{showModal:!1,showProModal:!1,upload:"",floors:[],currentFloor:$.extend({},i),currentFloorIndex:0,newFloor:$.extend({},i),currentFloorId:null,products:[],product:$.extend({},r),productIndex:""}},route:{data:function(o){this.getFloor()}},methods:{getFloor:function(){var o=this;$.ajax({url:domain+"/sample/sort",type:"GET"}).done(function(t){"1"==t.status&&t.data&&t.data.length&&(o.floors=t.data,o.currentFloor=t.data[0],o.currentFloorId=o.currentFloor._id)})},addFloor:function(){this.newFloor=$.extend({},i),this.showModal=!0},editFloor:function(){var o=this;o.newFloor=$.extend({},o.currentFloor),this.showModal=!0},saveFloor:function(){var o=this,t=JSON.parse((0,e["default"])(o.newFloor));return $.ajax({url:domain+"/sample/sort",type:"post",dataType:"json",data:t}).done(function(l){1==l.status&&(t._id?o.floors.$set(o.currentFloorIndex,t):(t._id=l.data._id,o.floors.push(t)),o.showModal=!1)}),!1},switchFloor:function(o,t){this.currentFloorIndex=t,this.currentFloor=this.floors[t],this.currentFloorId=this.currentFloor._id},delFloor:function(){var o=this;confirm("确定删除？")&&this.currentFloor._id&&$.ajax({url:domain+"/sample/sort/"+this.currentFloor._id,type:"delete"}).done(function(t){1==t.status&&o.floors.splice(o.currentFloorIndex,1)})},getProduct:function(){var o=this,t=this.currentFloor._id;$.ajax({url:domain+"/sample/product/"+t,type:"GET",dataType:"json"}).done(function(t){1==t.status&&(o.products=t.data)})},addProduct:function(){this.product=$.extend({},r),this.showProModal=!0},editProduct:function(o){this.product=this.products[o],this.productIndex=o,this.showProModal=!0},saveProduct:function(){var o=this,t=JSON.parse((0,e["default"])(this.product));t.floorid=this.currentFloor._id,$.ajax({url:domain+"/sample/product",type:"POST",dataType:"json",data:t}).done(function(l){1==l.status&&(t._id?o.products.$set(o.productIndex,t):(t._id=l.data._id,o.products.push(t)),o.showProModal=!1)})},delProduct:function(o,t){var l=this;confirm("确定删除？")&&o&&$.ajax({url:domain+"/sample/product/"+o,type:"delete"}).done(function(o){1==o.status&&l.products.splice(t,1)})},createStatic:function(){$.ajax({url:domain+"/create/sample",type:"GET"}).done(function(o){1==o.status?alert("成功"):alert("失败")})}},watch:{currentFloorId:function(o,t){this.getProduct()}}}},47:function(o,t,l){t=o.exports=l(4)(),t.push([o.id,".palent{background:#fff;border:1px solid #ddd;padding:10px}.mb10{margin-bottom:10px}",""])},64:function(o,t){o.exports='<side-menu></side-menu> <div class=content-wrapper> <div class=content-header> <h1>样品中心</h1> </div> <div class=content> <div class=mb10> <button class="btn btn-primary" @click=addProduct> <span class="glyphicon glyphicon-plus"></span> 添加产品</button> <a class="btn btn-danger" href=/sample target=_blank>预览</a> </div> <div class="nav-tabs-custom theme-panel"> <ul class="nav nav-tabs"> <template v-for="item in floors"> <li v-if="$index == currentFloorIndex" class=active @click="switchFloor(item._id, $index)"> <a href=javascript:;> {{ item.name }} </a> </li> <li v-if="$index != currentFloorIndex" @click="switchFloor(item._id, $index)"> <a href=javascript:;> {{ item.name }} </a> </li> </template> <li @click=addFloor> <a href=javascript:;> + 添加分类 </a> </li> </ul> <div class=tab-content> <div class=mb10> <div class=btn-group> <button type=button class="btn btn-default" @click=editFloor>修改分类</button> <button type=button class="btn btn-default" @click=delFloor>删除分类</button> </div> </div> <table class="table table-hover"> <tr> <th style=width:50%>产品</th> <th>价格</th> <th>点赞数</th> <th>管理</th> </tr> <tr v-for="item in products"> <td> <a class=media v-link=item.link target=_blank> <div class=media-left> <img v-bind:src="item.img | resize" width=100> </div> <div class=media-body> {{ item.name }} </div> </a> </td> <td>{{ item.price }}</td> <td>{{ item.like }}</td> <td> <button class="btn btn-sm btn-primary" @click=editProduct($index)>编辑</button> <button class="btn btn-sm btn-default" @click="delProduct(item._id, $index)">删除</button> </td> </tr> </table> </div> </div> </div> </div> <modal :show.sync=showModal title=分类> <div slot=modal-body class=modal-body> <form class=form-horizontal v-ajax-submit @submit.prevent=saveFloor> <div class=form-horizontal> <div class=form-group> <label for=inputEmail3 class="col-sm-2 control-label">分类名</label> <div class=col-sm-10> <input type=text class=form-control v-model=newFloor.name required> </div> </div> <div class=form-group> <label for=inputEmail3 class="col-sm-2 control-label">排序</label> <div class=col-sm-10> <input type=number class=form-control v-model=newFloor.sortId> </div> </div> <div class=form-group> <label for=inputPassword3 class="col-sm-2 control-label">是否显示</label> <div class=col-sm-10> <label class=radio-inline> <input type=radio name=state value=1 v-model=newFloor.state> 是 </label> <label class=radio-inline> <input type=radio name=state value=0 v-model=newFloor.state> 否 </label> </div> </div> <div class=form-group> <div class="col-sm-10 col-sm-offset-2"> <button class="btn btn-primary" type=submit> 提交 </button> </div> </div> </div> </form> </div> <div slot=modal-footer></div> </modal> <modal :show.sync=showProModal title=产品> <div slot=modal-body class=modal-body> <form class=form-horizontal v-ajax-submit @submit.prevent=saveProduct> <div class=form-horizontal> <div class=form-group> <label for=inputEmail3 class="col-sm-2 control-label">产品名</label> <div class=col-sm-10> <input type=text class=form-control v-model=product.name required> </div> </div> <div class=form-group> <label for=inputEmail3 class="col-sm-2 control-label">产品图片</label> <div class=col-sm-10> <upload id=pick-img :img.sync=product.img></upload> </div> </div> <div class=form-group> <label for=inputEmail3 class="col-sm-2 control-label">价格</label> <div class=col-sm-10> <input type=text class=form-control v-model=product.price> </div> </div> <div class=form-group> <label for=inputEmail3 class="col-sm-2 control-label">点赞数</label> <div class=col-sm-10> <input type=number class=form-control v-model=product.like> </div> </div> <div class=form-group> <label for=inputEmail3 class="col-sm-2 control-label">产品链接</label> <div class=col-sm-10> <input type=url class=form-control v-model=product.link> </div> </div> <div class=form-group> <label for=inputEmail3 class="col-sm-2 control-label">产品类型</label> <div class=col-sm-10> <select class=form-control v-model=product.pid required> <option v-for="item in floors" :value=item._id> {{ item.name }} </option> </select> </div> </div> <div class=form-group> <label for=inputEmail3 class="col-sm-2 control-label">是否显示</label> <div class=col-sm-10> <label class=radio-inline> <input type=radio name=isTop value=1 v-model=product.isTop> 显示 </label> <label class=radio-inline> <input type=radio name=isTop value=0 v-model=product.isTop> 隐藏 </label> </div> </div> <div class=form-group> <div class="col-sm-10 col-sm-offset-2"> <button class="btn btn-primary" type=submit>提交</button> </div> </div> </div> </form> </div> <div slot=modal-footer></div> </modal>'},79:function(o,t,l){var s,a;l(94),s=l(34),a=l(64),o.exports=s||{},o.exports.__esModule&&(o.exports=o.exports["default"]),a&&(("function"==typeof o.exports?o.exports.options||(o.exports.options={}):o.exports).template=a)},94:function(o,t,l){var s=l(47);"string"==typeof s&&(s=[[o.id,s,""]]);l(5)(s,{});s.locals&&(o.exports=s.locals)}});
//# sourceMappingURL=11.build.js.map