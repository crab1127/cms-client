{"version":3,"sources":["webpack:///10.build.js","webpack:///./~/babel-runtime/core-js/json/stringify.js?4574*******","webpack:///./~/babel-runtime/~/core-js/library/fn/json/stringify.js?834a*******","webpack:///./~/babel-runtime/~/core-js/library/modules/_core.js?d611*******","webpack:///./src/util/tree.js?4b90*","webpack:///sort.vue","webpack:///./src/views/sort.vue?9837","webpack:///./src/views/sort.vue?5253","webpack:///./src/views/sort.vue","webpack:///./src/views/sort.vue?3323"],"names":["webpackJsonp","1","module","exports","__webpack_require__","default","__esModule","2","core","$JSON","JSON","stringify","it","apply","arguments","3","version","__e","9","toTreeData","data","pid","temp","result","i","parentid","push","children","_id","length","35","_interopRequireDefault","obj","_stringify","_stringify2","categoryOpt","ishidden","sortId","showModal","moveModal","categorys","currentCategory","$","extend","currentCategoryIndex","newCategory","moveCategory","target","originId","originLevel","route","tranition","this","getCategory","methods","self","ajax","url","domain","type","done","res","status","a","addCategory","zIndex","id","index","editCategory","indexs","item","saveCategory","param","parse","dataType","$set","delCategory","confirm","splice","updateCache","console","log","alert","move","coord","originCoord","saveMove","params","targetId","split","ids","currentMenu","forEach","originIds","join","switchCategory","48","65","80","__vue_script__","__vue_template__","options","template","95","content","locals"],"mappings":"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","file":"10.build.js","sourcesContent":["webpackJsonp([10],{\n\n/***/ 1:\n/***/ function(module, exports, __webpack_require__) {\n\n\tmodule.exports = { \"default\": __webpack_require__(2), __esModule: true };\n\n/***/ },\n\n/***/ 2:\n/***/ function(module, exports, __webpack_require__) {\n\n\tvar core  = __webpack_require__(3)\n\t  , $JSON = core.JSON || (core.JSON = {stringify: JSON.stringify});\n\tmodule.exports = function stringify(it){ // eslint-disable-line no-unused-vars\n\t  return $JSON.stringify.apply($JSON, arguments);\n\t};\n\n/***/ },\n\n/***/ 3:\n/***/ function(module, exports) {\n\n\tvar core = module.exports = {version: '2.4.0'};\n\tif(typeof __e == 'number')__e = core; // eslint-disable-line no-undef\n\n/***/ },\n\n/***/ 9:\n/***/ function(module, exports) {\n\n\tfunction toTreeData(data,pid){\r\n\t    var result = [] , temp;\r\n\t    for(var i in data){\r\n\t        if(data[i].parentid==pid){\r\n\t            result.push(data[i]);\r\n\t            data[i].children = [];\r\n\t            temp = toTreeData(data,data[i]._id);\r\n\t            if(temp.length>0){\r\n\t                data[i].children=temp;\r\n\t                //console.log(i, data[i].children)\r\n\t            }\r\n\t        }\r\n\t    }\r\n\t    return result;\r\n\t}\r\n\tmodule.exports = toTreeData\r\n\n\n/***/ },\n\n/***/ 35:\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tvar _stringify = __webpack_require__(1);\n\t\n\tvar _stringify2 = _interopRequireDefault(_stringify);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tvar toTreeData = __webpack_require__(9);\n\t\n\tvar categoryOpt = {\n\t  parentid: '0',\n\t  ishidden: 1,\n\t  sortId: 10,\n\t  children: []\n\t};\n\t\n\tmodule.exports = {\n\t  data: function data() {\n\t    return {\n\t      showModal: false,\n\t      moveModal: false,\n\t\n\t      categorys: [],\n\t      currentCategory: $.extend({}, categoryOpt),\n\t      currentCategoryIndex: 0,\n\t      newCategory: $.extend({}, categoryOpt),\n\t\n\t      moveCategory: {\n\t        target: null,\n\t        originId: null,\n\t        originLevel: null\n\t      }\n\t    };\n\t  },\n\t  route: {\n\t    data: function data(tranition) {\n\t      this.getCategory();\n\t    }\n\t  },\n\t  methods: {\n\t    getCategory: function getCategory() {\n\t      var self = this;\n\t      $.ajax({\n\t        url: domain + '/category',\n\t        type: 'GET'\n\t      }).done(function (res) {\n\t        if (1 == res.status) {\n\t          var a = toTreeData(res.data, 0);\n\t          self.categorys = a;\n\t          self.currentCategory = $.extend({}, categoryOpt, a[self.currentCategoryIndex]);\n\t        }\n\t      });\n\t    },\n\t\n\t    addCategory: function addCategory(zIndex, id, index) {\n\t      var self = this;\n\t      if (id) {\n\t        categoryOpt.parentid = id;\n\t      }\n\t      this.newCategory = $.extend({}, categoryOpt, { zIndex: zIndex, index: index });\n\t      this.showModal = true;\n\t    },\n\t\n\t    editCategory: function editCategory(zIndex, indexs, item) {\n\t      var self = this;\n\t\n\t      item = item || this.categorys[indexs];\n\t\n\t      indexs = indexs || [];\n\t      delete item.children;\n\t      self.newCategory = $.extend({}, item, { zIndex: zIndex, index: indexs });\n\t      this.showModal = true;\n\t    },\n\t\n\t    saveCategory: function saveCategory() {\n\t      var self = this;\n\t      var param = JSON.parse((0, _stringify2.default)(self.newCategory));\n\t      $.ajax({\n\t        url: domain + '/category',\n\t        type: 'post',\n\t        dataType: 'json',\n\t        data: param\n\t      }).done(function (res) {\n\t        if (1 == res.status) {\n\t          if (!param._id) {\n\t            param._id = res.data._id;\n\t            switch (param.zIndex) {\n\t              case 1:\n\t                self.categorys.push(param);\n\t                break;\n\t              case 2:\n\t                self.currentCategory.children.push(param);\n\t                break;\n\t              case 3:\n\t                self.currentCategory.children[self.newCategory.index].children.push(param);\n\t                break;\n\t            }\n\t          } else {\n\t              switch (param.zIndex) {\n\t                case 1:\n\t                  self.categorys.$set(self.currentCategoryIndex, param);\n\t                  break;\n\t                case 2:\n\t                  self.currentCategory.children.$set(self.newCategory.index[0], param);\n\t                  break;\n\t                case 3:\n\t                  self.currentCategory.children[self.newCategory.index[0]].children.$set(self.newCategory.index[1], param);\n\t                  break;\n\t              }\n\t            }\n\t          self.showModal = false;\n\t        }\n\t      });\n\t      return false;\n\t    },\n\t\n\t    delCategory: function delCategory(zIndex, index, id) {\n\t      var self = this;\n\t      id = id || this.currentCategory._id;\n\t      if (confirm('确定删除？')) {\n\t        if (id) {\n\t          $.ajax({\n\t            url: domain + '/category/' + id,\n\t            type: 'delete'\n\t          }).done(function (res) {\n\t            if (1 == res.status) {\n\t              switch (zIndex) {\n\t                case 1:\n\t                  self.categorys.splice(self.currentCategoryIndex, 1);\n\t                  var a = self.currentCategoryIndex >= self.categorys.length ? self.categorys.length : self.currentCategoryIndex;\n\t                  self.currentCategory = self.categorys[a];\n\t                  break;\n\t                case 2:\n\t                  self.currentCategory.children.splice(index[0], 1);\n\t                  break;\n\t                case 3:\n\t                  self.currentCategory.children[index[0]].children.splice(index[1], 1);\n\t                  break;\n\t              }\n\t            }\n\t          });\n\t        }\n\t      }\n\t    },\n\t    updateCache: function updateCache() {\n\t      $.ajax({\n\t        url: domain + '/category/cache',\n\t        type: 'POST'\n\t      }).done(function (res) {\n\t        console.log(res);\n\t        if (1 == res.status) {\n\t          alert('更新成功');\n\t        }\n\t      });\n\t    },\n\t    move: function move(zIndex, coord, id) {\n\t      this.moveModal = true;\n\t      this.moveCategory.originLevel = zIndex;\n\t      this.moveCategory.originId = id;\n\t      this.moveCategory.originCoord = coord;\n\t    },\n\t    saveMove: function saveMove() {\n\t      if (!confirm('确定移动？')) return;\n\t\n\t      var self = this;\n\t      var params = {\n\t        targetId: this.moveCategory.target.split('|')[2]\n\t      };\n\t\n\t      if (this.moveCategory.target.split('|')[0] == 2 && this.moveCategory.originLevel == 2) {\n\t        var ids = [this.moveCategory.originId];\n\t        var currentMenu = this.currentCategory.children[this.moveCategory.originCoord[0]];\n\t        currentMenu.children.forEach(function (item) {\n\t          ids.push(item._id);\n\t        });\n\t        params.originIds = ids.join(',');\n\t      } else {\n\t        params.originIds = this.moveCategory.originId;\n\t      }\n\t      $.ajax({\n\t        url: domain + '/category/move',\n\t        type: 'POST',\n\t        data: params\n\t      }).done(function (res) {\n\t        if (1 == res.status) {\n\t          self.getCategory();\n\t          self.moveModal = false;\n\t        }\n\t      });\n\t    },\n\t    switchCategory: function switchCategory(id, index) {\n\t      this.currentCategoryIndex = index;\n\t      this.currentCategory = this.categorys[index];\n\t    }\n\t  }\n\t};\n\n/***/ },\n\n/***/ 48:\n/***/ function(module, exports, __webpack_require__) {\n\n\texports = module.exports = __webpack_require__(4)();\n\t// imports\n\t\n\t\n\t// module\n\texports.push([module.id, \".contacts-list li{padding:0;line-height:30px}.alert{background:#f4f4f4;border:1px solid #ddd}\", \"\"]);\n\t\n\t// exports\n\n\n/***/ },\n\n/***/ 65:\n/***/ function(module, exports) {\n\n\tmodule.exports = \"<side-menu></side-menu> <div class=content-wrapper> <div class=content-header> <h1>类目管理</h1> </div> <div class=content> <div class=mb10 style=\\\"\\\"> <button class=\\\"btn btn-primary\\\" @click=addCategory(1)> <span class=\\\"glyphicon glyphicon-plus\\\"></span> 添加顶级类目</button> <button class=\\\"btn btn-primary\\\" @click=updateCache()>更新缓存</button> </div> <div class=\\\"nav-tabs-custom theme-panel\\\"> <ul class=\\\"nav nav-tabs\\\"> <template v-for=\\\"item in categorys\\\"> <li v-if=\\\"$index == currentCategoryIndex\\\" class=active @click=\\\"switchCategory(item._id, $index)\\\"> <a href=javascript:;> {{ item.name }} </a> </li> <li v-if=\\\"$index != currentCategoryIndex\\\" @click=\\\"switchCategory(item._id, $index)\\\"> <a href=javascript:;> {{ item.name }} </a> </li> </template> </ul> <div class=tab-content v-if=currentCategory._id> <div class=mb10> <div class=btn-group> <button type=button class=\\\"btn btn-default\\\" @click=\\\"addCategory(2, currentCategory._id)\\\">添加子类目</button> <button type=button class=\\\"btn btn-default\\\" @click=\\\"editCategory(1, currentCategoryIndex)\\\">编辑类目</button> <button type=button class=\\\"btn btn-default\\\" @click=\\\"delCategory(1, currentCategoryIndex)\\\">删除类目</button> </div> </div> <div class=row> <div class=\\\"col-md-4 col-md-6\\\" v-for=\\\"(i, items) in currentCategory.children\\\"> <div class=\\\"box box-default\\\"> <div class=\\\"box-header with-border\\\"> <h3 class=box-title> {{items.name}} </h3> <div class=\\\"box-tools pull-right\\\"> <button type=button class=\\\"btn btn-box-tool\\\" @click=\\\"addCategory(3, items._id, i)\\\"> 添加子类 </button> <button type=button class=\\\"btn btn-box-tool\\\" @click=\\\"move(2, [i], items._id)\\\"> 移动 </button> <button type=button class=\\\"btn btn-box-tool\\\" @click=\\\"editCategory(2, [i], items)\\\"> 编辑 </button> <button type=button class=\\\"btn btn-box-tool\\\" @click=\\\"delCategory(2, [i], items._id)\\\"> 删除 </button> </div> </div> <div class=box-body style=\\\"display: block\\\"> <ul class=contacts-list> <li class=\\\"\\\" v-for=\\\"(index, item) in items.children\\\"> <span class=pull-right> <button type=button class=\\\"btn btn-box-tool\\\" @click=\\\"move(3, [i, index], item._id)\\\"> 移动 </button> <button type=button class=\\\"btn btn-box-tool\\\" @click=\\\"editCategory(3, [i, index], item)\\\"> 编辑 </button> <button type=button class=\\\"btn btn-box-tool\\\" @click=\\\"delCategory(3, [i, index], item._id)\\\"> 删除 </button> </span> {{ item.name }} </li> </ul> </div> </div> </div> </div> </div> </div> </div> </div> <modal :show.sync=showModal title=类目> <div slot=modal-body class=modal-body> <form class=form-horizontal v-ajax-submit @submit.prevent=saveCategory> <div class=form-horizontal> <div class=form-group> <label for=inputEmail3 class=\\\"col-sm-2 control-label\\\">名字</label> <div class=col-sm-10> <input type=text class=form-control v-model=newCategory.name required> </div> </div> <div class=form-group> <label for=inputEmail3 class=\\\"col-sm-2 control-label\\\">链接</label> <div class=col-sm-10> <input type=url class=form-control v-model=newCategory.link> </div> </div> <div class=form-group> <label for=inputEmail3 class=\\\"col-sm-2 control-label\\\">排序</label> <div class=col-sm-10> <input type=number class=form-control v-model=newCategory.sortId> </div> </div> <div class=form-group> <label for=inputPassword3 class=\\\"col-sm-2 control-label\\\">是否显示</label> <div class=col-sm-10> <input type=radio name=ishidden value=1 v-model=newCategory.ishidden> 是 <input type=radio name=ishidden value=0 v-model=newCategory.ishidden> 否 </div> </div> <div class=form-group> <div class=\\\"col-sm-10 col-sm-offset-2\\\"> <button class=\\\"btn btn-primary\\\" type=submit> 提交 </button> </div> </div> </div> </form> </div> <div slot=modal-footer></div> </modal> <modal :show.sync=moveModal title=移动类目> <div slot=modal-body class=modal-body> <div class=alert> <strong>提示:</strong> <p>移动后， 不能还原，请谨慎修改 <br> 类目最多只有3级； 移动到1级菜单时，不改变该菜单的子菜单；移动到2级菜单时，该菜单的子菜单也一并移动。 </p> </div> <form class=form-horizontal v-ajax-submit @submit.prevent=saveMove> <div class=form-group> <label for=inputEmail3 class=\\\"col-sm-2 control-label\\\">类目</label> <div class=col-sm-10> <select v-model=moveCategory.target class=form-control> <template v-for=\\\"(x, menus) in categorys\\\"> <option :value=\\\"'1|[' + x +']|' + menus._id\\\">{{menus.name}}</option> <option v-if=\\\"menus.children && menus.children.length\\\" v-for=\\\"(y, menu) in menus.children\\\" :value=\\\"'2|[' + x + ',' + y + ']|' + menu._id\\\"> &nbsp;&nbsp;|- {{menu.name}} </option> </template> </select> </div> </div> <div class=form-group> <div class=\\\"col-sm-10 col-sm-offset-2\\\"> <button class=\\\"btn btn-primary\\\" type=submit> 提交 </button> </div> </div> </form> </div> <div slot=modal-footer></div> </modal>\";\n\n/***/ },\n\n/***/ 80:\n/***/ function(module, exports, __webpack_require__) {\n\n\tvar __vue_script__, __vue_template__\n\t__webpack_require__(95)\n\t__vue_script__ = __webpack_require__(35)\n\t__vue_template__ = __webpack_require__(65)\n\tmodule.exports = __vue_script__ || {}\n\tif (module.exports.__esModule) module.exports = module.exports.default\n\tif (__vue_template__) {\n\t(typeof module.exports === \"function\" ? (module.exports.options || (module.exports.options = {})) : module.exports).template = __vue_template__\n\t}\n\n\n/***/ },\n\n/***/ 95:\n/***/ function(module, exports, __webpack_require__) {\n\n\t// style-loader: Adds some css to the DOM by adding a <style> tag\n\t\n\t// load the styles\n\tvar content = __webpack_require__(48);\n\tif(typeof content === 'string') content = [[module.id, content, '']];\n\t// add the styles to the DOM\n\tvar update = __webpack_require__(5)(content, {});\n\tif(content.locals) module.exports = content.locals;\n\t// Hot Module Replacement\n\tif(false) {\n\t\t// When the styles change, update the <style> tags\n\t\tif(!content.locals) {\n\t\t\tmodule.hot.accept(\"!!./../../node_modules/css-loader/index.js!./../../node_modules/vue-loader/lib/style-rewriter.js!./../../node_modules/vue-loader/lib/selector.js?type=style&index=0!./sort.vue\", function() {\n\t\t\t\tvar newContent = require(\"!!./../../node_modules/css-loader/index.js!./../../node_modules/vue-loader/lib/style-rewriter.js!./../../node_modules/vue-loader/lib/selector.js?type=style&index=0!./sort.vue\");\n\t\t\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\t\t\t\tupdate(newContent);\n\t\t\t});\n\t\t}\n\t\t// When the module is disposed, remove the <style> tags\n\t\tmodule.hot.dispose(function() { update(); });\n\t}\n\n/***/ }\n\n});\n\n\n/** WEBPACK FOOTER **\n ** 10.build.js\n **/","module.exports = { \"default\": require(\"core-js/library/fn/json/stringify\"), __esModule: true };\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/babel-runtime/core-js/json/stringify.js\n ** module id = 1\n ** module chunks = 0 3 4 5 6 7 8 9 10 11\n **/","var core  = require('../../modules/_core')\n  , $JSON = core.JSON || (core.JSON = {stringify: JSON.stringify});\nmodule.exports = function stringify(it){ // eslint-disable-line no-unused-vars\n  return $JSON.stringify.apply($JSON, arguments);\n};\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/babel-runtime/~/core-js/library/fn/json/stringify.js\n ** module id = 2\n ** module chunks = 0 3 4 5 6 7 8 9 10 11\n **/","var core = module.exports = {version: '2.4.0'};\nif(typeof __e == 'number')__e = core; // eslint-disable-line no-undef\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/babel-runtime/~/core-js/library/modules/_core.js\n ** module id = 3\n ** module chunks = 0 3 4 5 6 7 8 9 10 11\n **/","function toTreeData(data,pid){\r\n    var result = [] , temp;\r\n    for(var i in data){\r\n        if(data[i].parentid==pid){\r\n            result.push(data[i]);\r\n            data[i].children = [];\r\n            temp = toTreeData(data,data[i]._id);\r\n            if(temp.length>0){\r\n                data[i].children=temp;\r\n                //console.log(i, data[i].children)\r\n            }\r\n        }\r\n    }\r\n    return result;\r\n}\r\nmodule.exports = toTreeData\r\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./src/util/tree.js\n ** module id = 9\n ** module chunks = 3 4 10\n **/","<template>\r\n  <side-menu></side-menu>\r\n  <div class=\"content-wrapper\">\r\n    <div class=\"content-header\">\r\n      <h1>类目管理</h1>\r\n    </div>\r\n    <div class=\"content\">\r\n      <div class=\"mb10\" style=\"\">\r\n          <button class=\"btn btn-primary\" @click=\"addCategory(1)\"> <span class=\"glyphicon glyphicon-plus\"></span> 添加顶级类目</button>\r\n          <button class=\"btn btn-primary\" @click=\"updateCache()\">更新缓存</button>\r\n      </div>\r\n      <div class=\"nav-tabs-custom theme-panel\">\r\n        <ul class=\"nav nav-tabs\">\r\n          <template v-for=\"item in categorys\">\r\n            <li v-if=\"$index == currentCategoryIndex\" class=\"active\" @click=\"switchCategory(item._id, $index)\">\r\n              <a href=\"javascript:;\">\r\n                {{ item.name }}\r\n              </a>\r\n            </li>\r\n            <li v-if=\"$index != currentCategoryIndex\" @click=\"switchCategory(item._id, $index)\">\r\n              <a href=\"javascript:;\">\r\n                {{ item.name }}\r\n              </a>\r\n            </li>\r\n          </template>\r\n        </ul>\r\n        <div class=\"tab-content\" v-if=\"currentCategory._id\">\r\n          <div class=\"mb10\">\r\n            <div class=\"btn-group\">\r\n              <button type=\"button\" class=\"btn btn-default\" @click=\"addCategory(2, currentCategory._id)\">添加子类目</button>\r\n              <button type=\"button\" class=\"btn btn-default\" @click=\"editCategory(1, currentCategoryIndex)\">编辑类目</button>\r\n              <button type=\"button\" class=\"btn btn-default\" @click=\"delCategory(1, currentCategoryIndex)\">删除类目</button>\r\n            </div>\r\n          </div>\r\n          <div class=\"row\">\r\n            <div class=\"col-md-4 col-md-6\" v-for=\"(i, items) in currentCategory.children\">\r\n              <div class=\"box box-default\">\r\n                <div class=\"box-header with-border\">\r\n                  <h3 class=\"box-title\"> {{items.name}} </h3>\r\n\r\n                  <div class=\"box-tools pull-right\">\r\n                    <button type=\"button\" class=\"btn btn-box-tool\" @click=\"addCategory(3, items._id, i)\">\r\n                      添加子类\r\n                    </button>\r\n                    <button type=\"button\" class=\"btn btn-box-tool\" @click=\"move(2, [i], items._id)\">\r\n                      移动\r\n                    </button>\r\n                    <button type=\"button\" class=\"btn btn-box-tool\" @click=\"editCategory(2, [i], items)\">\r\n                      编辑\r\n                    </button>\r\n                    <button type=\"button\" class=\"btn btn-box-tool\" @click=\"delCategory(2, [i], items._id)\">\r\n                      删除\r\n                    </button>\r\n                  </div>\r\n                </div>\r\n                <div class=\"box-body\" style=\"display: block;\">\r\n                  <ul class=\"contacts-list\">\r\n                    <li class=\"\" v-for=\"(index, item) in items.children\">\r\n                        <span class=\"pull-right\">\r\n                          <button type=\"button\" class=\"btn btn-box-tool\" @click=\"move(3, [i, index], item._id)\">\r\n                            移动\r\n                          </button>\r\n                          <button type=\"button\" class=\"btn btn-box-tool\" @click=\"editCategory(3, [i, index], item)\">\r\n                            编辑\r\n                          </button>\r\n                          <button type=\"button\" class=\"btn btn-box-tool\" @click=\"delCategory(3, [i, index], item._id)\">\r\n                            删除\r\n                          </button>\r\n                        </span>\r\n                        {{ item.name }}\r\n                    </li>\r\n                  </ul>\r\n                </div>\r\n              </div>\r\n            </div>\r\n\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n  <!--添加类目-->\r\n  <modal :show.sync=\"showModal\" title=\"类目\">\r\n    <div slot=\"modal-body\" class=\"modal-body\">\r\n      <form class=\"form-horizontal\" v-ajax-submit @submit.prevent=\"saveCategory\">\r\n        <div class=\"form-horizontal\">\r\n          <!-- <div class=\"form-group\">\r\n            <label for=\"inputEmail3\" class=\"col-sm-2 control-label\">父级类目</label>\r\n            <div class=\"col-sm-10\">\r\n              <input type=\"text\" class=\"form-control\" v-model=\"newCategory.parentid\">\r\n            </div>\r\n          </div> -->\r\n          <div class=\"form-group\">\r\n            <label for=\"inputEmail3\" class=\"col-sm-2 control-label\">名字</label>\r\n            <div class=\"col-sm-10\">\r\n              <input type=\"text\" class=\"form-control\" v-model=\"newCategory.name\" required>\r\n            </div>\r\n          </div>\r\n          <div class=\"form-group\">\r\n            <label for=\"inputEmail3\" class=\"col-sm-2 control-label\">链接</label>\r\n            <div class=\"col-sm-10\">\r\n              <input type=\"url\" class=\"form-control\" v-model=\"newCategory.link\">\r\n            </div>\r\n          </div>\r\n          <div class=\"form-group\">\r\n            <label for=\"inputEmail3\" class=\"col-sm-2 control-label\">排序</label>\r\n            <div class=\"col-sm-10\">\r\n              <input type=\"number\" class=\"form-control\" v-model=\"newCategory.sortId\">\r\n            </div>\r\n          </div>\r\n          <div class=\"form-group\">\r\n            <label for=\"inputPassword3\" class=\"col-sm-2 control-label\">是否显示</label>\r\n            <div class=\"col-sm-10\">\r\n              <input type=\"radio\" name=\"ishidden\" value=\"1\" v-model=\"newCategory.ishidden\"> 是\r\n              <input type=\"radio\" name=\"ishidden\" value=\"0\" v-model=\"newCategory.ishidden\"> 否\r\n            </div>\r\n          </div>\r\n          <div class=\"form-group\">\r\n            <div class=\"col-sm-10 col-sm-offset-2\">\r\n              <button class=\"btn btn-primary\" type=\"submit\">\r\n                提交\r\n              </button>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </form>\r\n    </div>\r\n    <div slot=\"modal-footer\"></div>\r\n  </modal>\r\n  <modal :show.sync=\"moveModal\" title=\"移动类目\">\r\n    <div slot=\"modal-body\" class=\"modal-body\">\r\n      <div class=\"alert\">\r\n        <strong>提示:</strong>\r\n        <p>移动后， 不能还原，请谨慎修改 <br>\r\n        类目最多只有3级；\r\n        移动到1级菜单时，不改变该菜单的子菜单；移动到2级菜单时，该菜单的子菜单也一并移动。\r\n        </p>\r\n      </div>\r\n      <form class=\"form-horizontal\" v-ajax-submit @submit.prevent=\"saveMove\">\r\n        <div class=\"form-group\">\r\n          <label for=\"inputEmail3\" class=\"col-sm-2 control-label\">类目</label>\r\n          <div class=\"col-sm-10\">\r\n            <select v-model=\"moveCategory.target\" class=\"form-control\">\r\n              <template v-for=\"(x, menus) in categorys\">\r\n                <option :value=\"'1|[' + x +']|' + menus._id\">{{menus.name}}</option>\r\n                <option\r\n                  v-if=\"menus.children && menus.children.length\"\r\n                  v-for=\"(y, menu) in menus.children\"\r\n                  :value=\"'2|[' + x + ',' + y + ']|' + menu._id\">\r\n                  &nbsp;&nbsp;|- {{menu.name}}\r\n                </option>\r\n              </template>\r\n            </select>\r\n          </div>\r\n        </div>\r\n        <div class=\"form-group\">\r\n          <div class=\"col-sm-10 col-sm-offset-2\">\r\n            <button class=\"btn btn-primary\" type=\"submit\">\r\n              提交\r\n            </button>\r\n          </div>\r\n        </div>\r\n      </form>\r\n    </div>\r\n    <div slot=\"modal-footer\"></div>\r\n  </modal>\r\n</template>\r\n<script>\r\n\r\n  //类目管理， 最多3级。\r\n\r\n  var toTreeData = require('../util/tree');\r\n\r\n  var categoryOpt = {\r\n    parentid: '0',\r\n    ishidden: 1,\r\n    sortId: 10,\r\n    children: []\r\n  };\r\n\r\n  module.exports = {\r\n    data: function() {\r\n      return {\r\n        showModal: false,\r\n        moveModal: false,\r\n        //类目\r\n        categorys: [],\r\n        currentCategory: $.extend({}, categoryOpt), //\r\n        currentCategoryIndex: 0,  //当前楼层索引\r\n        newCategory: $.extend({}, categoryOpt),\r\n\r\n        //移动类目\r\n        moveCategory: {\r\n          target: null,\r\n          originId: null,\r\n          originLevel: null\r\n        }\r\n      }\r\n    },\r\n    route: {\r\n      data: function(tranition) {\r\n        this.getCategory()\r\n      }\r\n    },\r\n    methods: {\r\n      //楼层\r\n      //获取楼层\r\n      getCategory: function() {\r\n        var self = this;\r\n        $.ajax({\r\n          url: domain + '/category',\r\n          type: 'GET'\r\n        })\r\n        .done(function(res) {\r\n          if (1 == res.status) {\r\n            var a = toTreeData(res.data, 0);\r\n            self.categorys = a;\r\n            self.currentCategory = $.extend({}, categoryOpt, a[self.currentCategoryIndex]);\r\n          }\r\n        });\r\n      },\r\n      //添加楼层\r\n      addCategory: function(zIndex, id, index) {\r\n        var self = this;\r\n        if (id) {\r\n          categoryOpt.parentid = id;\r\n        }\r\n        this.newCategory = $.extend({}, categoryOpt, {zIndex: zIndex, index: index});\r\n        this.showModal = true;\r\n      },\r\n      //编辑楼层\r\n      // zIndex 层级 indexs 数组  item 对象\r\n      editCategory: function(zIndex, indexs, item) {\r\n        var self = this;\r\n        //只有顶级不传item，\r\n        item = item || this.categorys[indexs];\r\n\r\n        indexs = indexs || [];\r\n        delete item.children;\r\n        self.newCategory = $.extend({}, item, {zIndex:zIndex, index: indexs});\r\n        this.showModal = true;\r\n      },\r\n      //保存\r\n      saveCategory: function() {\r\n        var self = this;\r\n        var param = JSON.parse(JSON.stringify(self.newCategory));\r\n        $.ajax({\r\n          url: domain + '/category',\r\n          type: 'post',\r\n          dataType: 'json',\r\n          data: param\r\n        })\r\n        .done(function(res) {\r\n          if (1 == res.status) {\r\n            // 新增\r\n            if (!param._id) {\r\n              param._id = res.data._id;\r\n              switch (param.zIndex) {\r\n                case 1:\r\n                  self.categorys.push(param);\r\n                  break;\r\n                case 2:\r\n                  self.currentCategory.children.push(param);\r\n                  break;\r\n                case 3:\r\n                  self.currentCategory.children[self.newCategory.index].children.push(param);\r\n                  break;\r\n              }\r\n            }\r\n            // 更新\r\n            else {\r\n              switch (param.zIndex) {\r\n                case 1:\r\n                  self.categorys.$set(self.currentCategoryIndex, param);\r\n                  break;\r\n                case 2:\r\n                  self.currentCategory.children.$set(self.newCategory.index[0], param);\r\n                  break;\r\n                case 3:\r\n                  self.currentCategory.children[self.newCategory.index[0]]\r\n                    .children.$set(self.newCategory.index[1], param);\r\n                  break;\r\n              }\r\n            }\r\n            self.showModal = false;\r\n          }\r\n        });\r\n        return false;\r\n      },\r\n      //删除楼层\r\n      delCategory: function(zIndex, index, id) {\r\n        var self = this;\r\n        id = id || this.currentCategory._id\r\n        if (confirm('确定删除？')) {\r\n          if (id) {\r\n            $.ajax({\r\n              url: domain + '/category/' + id,\r\n              type: 'delete',\r\n            })\r\n            .done(function(res) {\r\n              if(1 == res.status) {\r\n                switch (zIndex) {\r\n                  case 1:\r\n                    self.categorys.splice(self.currentCategoryIndex, 1);\r\n                    var a = (self.currentCategoryIndex >= self.categorys.length)\r\n                            ? self.categorys.length : self.currentCategoryIndex;\r\n                    self.currentCategory = self.categorys[a];\r\n                    break;\r\n                  case 2:\r\n                    self.currentCategory.children.splice(index[0], 1);\r\n                    break;\r\n                  case 3:\r\n                    self.currentCategory.children[index[0]].children.splice(index[1], 1);\r\n                    break;\r\n                }\r\n              }\r\n            })\r\n          }\r\n        }\r\n      },\r\n      updateCache: function(){\r\n        $.ajax({\r\n          url: domain + '/category/cache',\r\n          type: 'POST'\r\n        })\r\n        .done(function(res) {\r\n          console.log(res);\r\n          if (1 == res.status) {\r\n            alert('更新成功')\r\n          }\r\n        })\r\n      },\r\n      move: function(zIndex, coord, id){\r\n        this.moveModal = true;\r\n        this.moveCategory.originLevel = zIndex;\r\n        this.moveCategory.originId = id;\r\n        this.moveCategory.originCoord = coord;\r\n      },\r\n      saveMove: function() {\r\n        if(!confirm('确定移动？')) return;\r\n\r\n        var self = this;\r\n        var params = {\r\n          targetId: this.moveCategory.target.split('|')[2]\r\n        };\r\n        //移动到一级菜单\r\n        if (this.moveCategory.target.split('|')[0] == 2 && this.moveCategory.originLevel == 2) {\r\n          var ids = [this.moveCategory.originId];\r\n          var currentMenu = this.currentCategory.children[this.moveCategory.originCoord[0]];\r\n          currentMenu.children.forEach(function(item){\r\n            ids.push(item._id);\r\n          })\r\n          params.originIds = ids.join(',');\r\n        } else {\r\n          params.originIds = this.moveCategory.originId\r\n        }\r\n        $.ajax({\r\n          url: domain + '/category/move',\r\n          type: 'POST',\r\n          data: params,\r\n        })\r\n        .done(function(res) {\r\n          if (1 == res.status) {\r\n            //移动的数据太麻烦了， 还是重新获取\r\n            self.getCategory();\r\n            self.moveModal = false;\r\n          }\r\n\r\n        });\r\n      },\r\n      switchCategory: function(id, index) {\r\n        this.currentCategoryIndex = index;\r\n        this.currentCategory = this.categorys[index];\r\n      }\r\n    }\r\n  }\r\n\r\n  //递归生成树形结构\r\n\r\n</script>\r\n\r\n\r\n<style>\r\n  .contacts-list li{\r\n    padding: 0;\r\n    line-height: 30px;\r\n  }\r\n  .alert{\r\n    background: #f4f4f4;\r\n    border:1px solid #ddd;\r\n  }\r\n</style>\r\n\n\n\n/** WEBPACK FOOTER **\n ** sort.vue?b31e97de\n **/","exports = module.exports = require(\"./../../node_modules/css-loader/lib/css-base.js\")();\n// imports\n\n\n// module\nexports.push([module.id, \".contacts-list li{padding:0;line-height:30px}.alert{background:#f4f4f4;border:1px solid #ddd}\", \"\"]);\n\n// exports\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/css-loader!./~/vue-loader/lib/style-rewriter.js!./~/vue-loader/lib/selector.js?type=style&index=0!./src/views/sort.vue\n ** module id = 48\n ** module chunks = 10\n **/","module.exports = \"<side-menu></side-menu> <div class=content-wrapper> <div class=content-header> <h1>类目管理</h1> </div> <div class=content> <div class=mb10 style=\\\"\\\"> <button class=\\\"btn btn-primary\\\" @click=addCategory(1)> <span class=\\\"glyphicon glyphicon-plus\\\"></span> 添加顶级类目</button> <button class=\\\"btn btn-primary\\\" @click=updateCache()>更新缓存</button> </div> <div class=\\\"nav-tabs-custom theme-panel\\\"> <ul class=\\\"nav nav-tabs\\\"> <template v-for=\\\"item in categorys\\\"> <li v-if=\\\"$index == currentCategoryIndex\\\" class=active @click=\\\"switchCategory(item._id, $index)\\\"> <a href=javascript:;> {{ item.name }} </a> </li> <li v-if=\\\"$index != currentCategoryIndex\\\" @click=\\\"switchCategory(item._id, $index)\\\"> <a href=javascript:;> {{ item.name }} </a> </li> </template> </ul> <div class=tab-content v-if=currentCategory._id> <div class=mb10> <div class=btn-group> <button type=button class=\\\"btn btn-default\\\" @click=\\\"addCategory(2, currentCategory._id)\\\">添加子类目</button> <button type=button class=\\\"btn btn-default\\\" @click=\\\"editCategory(1, currentCategoryIndex)\\\">编辑类目</button> <button type=button class=\\\"btn btn-default\\\" @click=\\\"delCategory(1, currentCategoryIndex)\\\">删除类目</button> </div> </div> <div class=row> <div class=\\\"col-md-4 col-md-6\\\" v-for=\\\"(i, items) in currentCategory.children\\\"> <div class=\\\"box box-default\\\"> <div class=\\\"box-header with-border\\\"> <h3 class=box-title> {{items.name}} </h3> <div class=\\\"box-tools pull-right\\\"> <button type=button class=\\\"btn btn-box-tool\\\" @click=\\\"addCategory(3, items._id, i)\\\"> 添加子类 </button> <button type=button class=\\\"btn btn-box-tool\\\" @click=\\\"move(2, [i], items._id)\\\"> 移动 </button> <button type=button class=\\\"btn btn-box-tool\\\" @click=\\\"editCategory(2, [i], items)\\\"> 编辑 </button> <button type=button class=\\\"btn btn-box-tool\\\" @click=\\\"delCategory(2, [i], items._id)\\\"> 删除 </button> </div> </div> <div class=box-body style=\\\"display: block\\\"> <ul class=contacts-list> <li class=\\\"\\\" v-for=\\\"(index, item) in items.children\\\"> <span class=pull-right> <button type=button class=\\\"btn btn-box-tool\\\" @click=\\\"move(3, [i, index], item._id)\\\"> 移动 </button> <button type=button class=\\\"btn btn-box-tool\\\" @click=\\\"editCategory(3, [i, index], item)\\\"> 编辑 </button> <button type=button class=\\\"btn btn-box-tool\\\" @click=\\\"delCategory(3, [i, index], item._id)\\\"> 删除 </button> </span> {{ item.name }} </li> </ul> </div> </div> </div> </div> </div> </div> </div> </div> <modal :show.sync=showModal title=类目> <div slot=modal-body class=modal-body> <form class=form-horizontal v-ajax-submit @submit.prevent=saveCategory> <div class=form-horizontal> <div class=form-group> <label for=inputEmail3 class=\\\"col-sm-2 control-label\\\">名字</label> <div class=col-sm-10> <input type=text class=form-control v-model=newCategory.name required> </div> </div> <div class=form-group> <label for=inputEmail3 class=\\\"col-sm-2 control-label\\\">链接</label> <div class=col-sm-10> <input type=url class=form-control v-model=newCategory.link> </div> </div> <div class=form-group> <label for=inputEmail3 class=\\\"col-sm-2 control-label\\\">排序</label> <div class=col-sm-10> <input type=number class=form-control v-model=newCategory.sortId> </div> </div> <div class=form-group> <label for=inputPassword3 class=\\\"col-sm-2 control-label\\\">是否显示</label> <div class=col-sm-10> <input type=radio name=ishidden value=1 v-model=newCategory.ishidden> 是 <input type=radio name=ishidden value=0 v-model=newCategory.ishidden> 否 </div> </div> <div class=form-group> <div class=\\\"col-sm-10 col-sm-offset-2\\\"> <button class=\\\"btn btn-primary\\\" type=submit> 提交 </button> </div> </div> </div> </form> </div> <div slot=modal-footer></div> </modal> <modal :show.sync=moveModal title=移动类目> <div slot=modal-body class=modal-body> <div class=alert> <strong>提示:</strong> <p>移动后， 不能还原，请谨慎修改 <br> 类目最多只有3级； 移动到1级菜单时，不改变该菜单的子菜单；移动到2级菜单时，该菜单的子菜单也一并移动。 </p> </div> <form class=form-horizontal v-ajax-submit @submit.prevent=saveMove> <div class=form-group> <label for=inputEmail3 class=\\\"col-sm-2 control-label\\\">类目</label> <div class=col-sm-10> <select v-model=moveCategory.target class=form-control> <template v-for=\\\"(x, menus) in categorys\\\"> <option :value=\\\"'1|[' + x +']|' + menus._id\\\">{{menus.name}}</option> <option v-if=\\\"menus.children && menus.children.length\\\" v-for=\\\"(y, menu) in menus.children\\\" :value=\\\"'2|[' + x + ',' + y + ']|' + menu._id\\\"> &nbsp;&nbsp;|- {{menu.name}} </option> </template> </select> </div> </div> <div class=form-group> <div class=\\\"col-sm-10 col-sm-offset-2\\\"> <button class=\\\"btn btn-primary\\\" type=submit> 提交 </button> </div> </div> </form> </div> <div slot=modal-footer></div> </modal>\";\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/vue-html-loader!./~/vue-loader/lib/selector.js?type=template&index=0!./src/views/sort.vue\n ** module id = 65\n ** module chunks = 10\n **/","var __vue_script__, __vue_template__\nrequire(\"!!vue-style-loader!css-loader!./../../node_modules/vue-loader/lib/style-rewriter.js!./../../node_modules/vue-loader/lib/selector.js?type=style&index=0!./sort.vue\")\n__vue_script__ = require(\"!!babel-loader?presets[]=es2015&plugins[]=transform-runtime&comments=false!./../../node_modules/vue-loader/lib/selector.js?type=script&index=0!./sort.vue\")\n__vue_template__ = require(\"!!vue-html-loader!./../../node_modules/vue-loader/lib/selector.js?type=template&index=0!./sort.vue\")\nmodule.exports = __vue_script__ || {}\nif (module.exports.__esModule) module.exports = module.exports.default\nif (__vue_template__) {\n(typeof module.exports === \"function\" ? (module.exports.options || (module.exports.options = {})) : module.exports).template = __vue_template__\n}\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./src/views/sort.vue\n ** module id = 80\n ** module chunks = 10\n **/","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!./../../node_modules/css-loader/index.js!./../../node_modules/vue-loader/lib/style-rewriter.js!./../../node_modules/vue-loader/lib/selector.js?type=style&index=0!./sort.vue\");\nif(typeof content === 'string') content = [[module.id, content, '']];\n// add the styles to the DOM\nvar update = require(\"!./../../node_modules/vue-style-loader/addStyles.js\")(content, {});\nif(content.locals) module.exports = content.locals;\n// Hot Module Replacement\nif(module.hot) {\n\t// When the styles change, update the <style> tags\n\tif(!content.locals) {\n\t\tmodule.hot.accept(\"!!./../../node_modules/css-loader/index.js!./../../node_modules/vue-loader/lib/style-rewriter.js!./../../node_modules/vue-loader/lib/selector.js?type=style&index=0!./sort.vue\", function() {\n\t\t\tvar newContent = require(\"!!./../../node_modules/css-loader/index.js!./../../node_modules/vue-loader/lib/style-rewriter.js!./../../node_modules/vue-loader/lib/selector.js?type=style&index=0!./sort.vue\");\n\t\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\t\t\tupdate(newContent);\n\t\t});\n\t}\n\t// When the module is disposed, remove the <style> tags\n\tmodule.hot.dispose(function() { update(); });\n}\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/vue-style-loader!./~/css-loader!./~/vue-loader/lib/style-rewriter.js!./~/vue-loader/lib/selector.js?type=style&index=0!./src/views/sort.vue\n ** module id = 95\n ** module chunks = 10\n **/"],"sourceRoot":""}